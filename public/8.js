(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{PZEM:function(t,e,i){"use strict";i.r(e);var o=i("mrSG"),r=i("YKMj"),s=i("vDqi"),a=i.n(s),d=i("fn6U"),n=i("JSrV"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.d={data:[],mp:d.a,loadingData:[],landList:!1,sliderOpt:{},cat_slug:e.extractSlug(),nextUrl:"",remain:15,loadingProducts:!0,scroll:0,activeSlug:e.extractSlug(),empty:!1,doc:{route:"",method:"GET",info:"",url_with_params:"",test_curl:"",response:"",res_doc:[200,""],headers:[],url_params:[],query:[],parent:""},cart:{items:[],wish:[],count:0,total:0},item:{size:0,color:0,qty:1,wishId:0,wishing:!1},cartLoaded:.555,cartLoader:!0,wishLoader:!0,currentFilter:"",currentFilterIndx:"pop",colors:[],sizes:[],prices:{min:0,max:0},selectedPrices:{min:0,max:0},filters:{sizes:[],colors:[],price:{min:0,max:0},stars:0},q:"",searching:!1,resetFilters:Math.random(),userId:0,scrollTop:0},e}return Object(o.c)(e,t),e.prototype.openModal=function(t){this.openModalNative(this.d,t,"productModal")},e.prototype.loadData=function(t,e,i,r){var s=this;void 0===t&&(t="/collection/"+this.d.cat_slug),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===r&&(r=this.d.currentFilterIndx),e||this.d.searching||(this.d.activeSlug=t.split("/")[2]),this.d.searching&&(this.d.activeSlug=this.d.q),this.d.empty=!1,this.showLoader(e),a.a.get(t,{params:{sort:r,filters:this.d.filters,q:this.d.q}}).then((function(t){if(t&&t.data.data){if(s.setDoc(s.d.activeSlug,i,e,s.d.searching),!t.data.data.length)return s.hideLoader(),void(s.d.empty=!0);t=t.data,s.setDoc(s.d.activeSlug,!0,e,s.d.searching),e?s.d.data=s.d.data.concat(Object(o.f)(t.data)):(s.d.scrollTop>10&&(document.body.scrollTop=0,document.documentElement.scrollTop=0),s.d.data=Object(o.f)(t.data)),s.doCalc(t.data,e),s.d.nextUrl=t.next_page_url||"",s.d.remain=t.total-t.to,s.d.loadingProducts=!1,s.d.searching=!1,s.hideLoader(e)}else s.error()}))},e.prototype.doCalc=function(t,e){var i=this,o=[this.d.prices.min,this.d.prices.max];t.map((function(t){i.addOrRemove("colors",t),i.addOrRemove("sizes",t),o.push(t.saved_price)})),o=o.sort((function(t,e){return t-e})),this.d.prices={min:o[0],max:o[o.length-1]},this.d.selectedPrices.max=Math.round((this.d.prices.min+this.d.prices.max)/2+this.d.prices.min)},e.prototype.addOrRemove=function(t,e){var i,r,s=function(e){a.d[t].some((function(t){return t.txt===e}))||a.d[t].push({id:"was"+Math.round(156133*Math.random()),txt:e,checked:!1})},a=this;try{for(var d=Object(o.g)(e[t]),n=d.next();!n.done;n=d.next()){s(n.value)}}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}},e.prototype.getProducts=function(t){void 0===t&&(t=""),t!=="/collection/"+this.d.activeSlug&&(this.d.activeSlug=t,this.d.searching=!1,this.d.q=" ",this.d.q="",this.resetAllfilters(),this.loadData(t))},e.prototype.checkIfReachedBottom=function(){var t=this;window.onscroll=function(e){t.d.scrollTop=document.documentElement.clientHeight+document.documentElement.scrollTop,t.d.scrollTop>=document.querySelector("#component-container").scrollHeight&&t.d.data.length&&""!==t.d.nextUrl&&!t.d.loadingProducts&&t.loadData(t.d.nextUrl,!0)}},e.prototype.setDoc=function(t,e,i,o){if(void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===o&&(o=!1),!i){var r=e?"replaceState":"pushState",s="LavaStore - "+t.replace(/-/g," "),a="/"+this.lang()+"/products/"+t;o&&(a="/"+this.lang()+"/products/find?q="+encodeURI(t)),window.history[r]({slug:t},s,a),document.title=s,document.querySelector("#ptitle").textContent=s}},e.prototype.addToCart=function(){this.addToCartNative(this.d.mp,this.d.item.qty,this.d.item.size,this.d.item.color)},e.prototype.removeFromCart=function(t){this.removeFromCartNative(t)},e.prototype.addToWish=function(){var t=this;this.addToWishList(this.d,"mp").then((function(e){e&&e.item&&t.pushToCartList({item:e.item})}))},e.prototype.filterData=function(t,e){void 0===t&&(t="pop"),this.d.currentFilter=e,this.d.currentFilterIndx=t;var i="/collection/"+this.d.activeSlug;this.d.q.length&&(this.d.searching=!0,i="/collection/find?q="+this.d.q),this.loadData(i,!1)},e.prototype.setSideFilters=function(t,e){var i=this;if("size"===t)this.d.filters.sizes=[],e.forEach((function(t){return i.d.filters.sizes.push(t.txt)}));else if("color"===t)this.d.filters.colors=[],e.forEach((function(t){return i.d.filters.colors.push(t.txt)}));else if("price"===t){var o=this.d.selectedPrices.min,r=this.d.selectedPrices.max;this.d.filters.price={min:o<=r?o:r,max:r>=o?r:o}}else this.d.filters.stars=e;var s="/collection/"+this.d.activeSlug;this.d.q.length&&(this.d.searching=!0,s="/collection/find?q="+this.d.q),this.loadData(s,!1)},e.prototype.searchFor=function(){this.d.q&&this.d.q.length&&(this.d.searching=!0,this.loadData("/collection/find"))},e.prototype.checkSearchForm=function(){if(location.pathname.indexOf("/products/find")>-1)return this.d.q=location.href.split("q=")[1],void this.searchFor();this.loadData()},e.prototype.resetAllfilters=function(){this.d.resetFilters=Math.round(99999*Math.random()),this.d.filters={sizes:[],colors:[],price:{min:0,max:0},stars:0},this.loadData()},e.prototype.hasFilterActive=function(){var t=this.d.filters;return t.sizes.length>0||t.colors.length>0||t.price.min>0||t.price.max>0||t.stars>0},e.prototype.showLoader=function(t){void 0===t&&(t=!1),this.d.loadingProducts=!0,t||(this.d.remain=15,this.d.data=[]),this.fillLoadingData(this.d)},e.prototype.hideLoader=function(t){void 0===t&&(t=!1),this.d.loadingProducts=!1,this.d.loadingData=[]},e.prototype.beforeMount=function(){this.attachToGlobal(this,["openModal","getProducts","showNotify","pushToCartList","addToCart","removeFromCart","addToWish","filterData","setSideFilters","resetAllfilters","hasFilterActive"]),this.fillLoadingData(this.d)},e.prototype.mounted=function(){var t=this;this.checkIfReachedBottom(),this.$on("cartDone",(function(e){t.d.cartLoaded=1e4*Math.random()})),this.checkSearchForm(),window.onpopstate=function(e){e.state&&t.loadData("/collection/"+e.state.slug,!1,!0)}},e=Object(o.b)([r.a],e)}(Object(r.b)(d.b,n.a));e.default=c}}]);
//# sourceMappingURL=8.js.map