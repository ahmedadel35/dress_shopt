{"version":3,"sources":["webpack:///./resources/js/pages/contact-us.ts"],"names":["d","cart","items","loaders","wish","count","total","cartLoader","wishLoader","q","userId","scrollTop","form","userMail","userName","userMessage","sending","hasErrors","errors","sendMail","this","validateMail","post","then","res","data","status","success","getLang","error","validateOnKeyPress","test","length","beforeMount","attachToGlobal","mounted","window","ContactUs"],"mappings":"iKAyBA,yE,OACW,EAAAA,EAAmB,CACtBC,KAAM,CACFC,MAAO,GAEPC,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBC,KAAM,GACNC,MAAO,EACPC,MAAO,GAEXC,YAAY,EACZC,YAAY,EACZC,EAAG,GACHC,OAAQ,EACRC,UAAW,EACXC,KAAM,CACFC,SAAU,GACVC,SAAU,GACVC,YAAa,GACbC,SAAS,EACTC,WAAW,GAEfC,OAAQ,CACJL,SAAU,GACVC,SAAU,GACVC,YAAa,K,EAyDzB,OAlFuC,iBA6B5B,YAAAI,SAAP,sBACIC,KAAKpB,EAAEY,KAAKK,UAAYG,KAAKC,eACzBD,KAAKpB,EAAEY,KAAKI,SAAWI,KAAKpB,EAAEY,KAAKK,YAIvCG,KAAKpB,EAAEY,KAAKI,SAAU,EAEtB,IAAMM,KAAK,QAASF,KAAKpB,EAAEY,MAAMW,MAAK,SAAAC,GAClC,OAAKA,GAAQA,EAAIC,KAME,MAAfD,EAAIE,QACJ,EAAK1B,EAAEkB,OAASM,EAAIC,KAAKP,OACzB,EAAKlB,EAAEY,KAAKK,WAAY,OACxB,EAAKjB,EAAEY,KAAKI,SAAU,KAI1B,EAAKW,QAAQ,EAAKC,QAAQ,GAAI,EAAKA,QAAQ,KAC3C,EAAK5B,EAAEY,KAAKI,SAAU,OACtB,EAAKhB,EAAEY,KAAKG,YAAc,MAdtB,EAAKc,aACL,EAAK7B,EAAEY,KAAKI,SAAU,SAiB3B,YAAAc,mBAAP,WACIV,KAAKpB,EAAEY,KAAKK,UAAYG,KAAKC,gBAGzB,YAAAA,aAAR,WAEI,OADW,4JACHU,KAAKX,KAAKpB,EAAEY,KAAKC,WAIrBO,KAAKpB,EAAEY,KAAKG,YAAYiB,OAAS,GAOzC,YAAAC,YAAA,WACIb,KAAKc,eAAed,KAAM,CAAC,WAAY,wBAG3C,YAAAe,QAAA,W,YACIf,KAAKpB,EAAEY,KAAKE,SAAkC,QAA1B,EAAgB,QAAhB,EAAGsB,OAAY,WAAC,eAAEtB,gBAAQ,QAAI,GAClDM,KAAKpB,EAAEY,KAAKC,SAAkC,QAA1B,EAAgB,QAAhB,EAAGuB,OAAY,WAAC,eAAEvB,gBAAQ,QAAI,IAhFrCwB,EAAS,aAD7B,KACoBA,GAArB,CAAuC,KAAlB","file":"7.js","sourcesContent":["import { Component } from \"vue-property-decorator\";\r\nimport Super from \"./super\";\r\nimport CartInterface from \"../interfaces/cart\";\r\nimport Axios from \"axios\";\r\n\r\nexport interface Form {\r\n    userName: string;\r\n    userMail: string;\r\n    userMessage: string;\r\n    sending?: boolean;\r\n    hasErrors?: boolean;\r\n}\r\n\r\nexport interface ContactUsData {\r\n    cart: CartInterface;\r\n    cartLoader: boolean;\r\n    wishLoader: boolean;\r\n    q: string;\r\n    userId: number;\r\n    scrollTop: number;\r\n    form: Form;\r\n    errors: Form;\r\n}\r\n\r\n@Component\r\nexport default class ContactUs extends Super {\r\n    public d: ContactUsData = {\r\n        cart: {\r\n            items: [],\r\n            // @ts-ignore\r\n            loaders: [1, 2, 3, 4],\r\n            wish: [],\r\n            count: 0,\r\n            total: 0\r\n        },\r\n        cartLoader: true,\r\n        wishLoader: true,\r\n        q: \"\",\r\n        userId: 0,\r\n        scrollTop: 0,\r\n        form: {\r\n            userMail: \"\",\r\n            userName: \"\",\r\n            userMessage: \"\",\r\n            sending: false,\r\n            hasErrors: false\r\n        },\r\n        errors: {\r\n            userMail: \"\",\r\n            userName: \"\",\r\n            userMessage: \"\"\r\n        }\r\n    };\r\n\r\n    public sendMail() {\r\n        this.d.form.hasErrors = this.validateMail();\r\n        if (this.d.form.sending || this.d.form.hasErrors) {\r\n            return;\r\n        }\r\n\r\n        this.d.form.sending = true;\r\n\r\n        Axios.post(\"/mail\", this.d.form).then(res => {\r\n            if (!res || !res.data) {\r\n                this.error();\r\n                this.d.form.sending = false;\r\n                return;\r\n            }\r\n\r\n            if (res.status === 422) {\r\n                this.d.errors = res.data.errors;\r\n                this.d.form.hasErrors = true;\r\n                this.d.form.sending = false;\r\n                return;\r\n            }\r\n\r\n            this.success(this.getLang(2), this.getLang(12));\r\n            this.d.form.sending = false;\r\n            this.d.form.userMessage = '';\r\n        });\r\n    }\r\n\r\n    public validateOnKeyPress() {\r\n        this.d.form.hasErrors = this.validateMail();\r\n    }\r\n\r\n    private validateMail() {\r\n        const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        if (!re.test(this.d.form.userMail)) {\r\n            return true;\r\n        }\r\n\r\n        if (this.d.form.userMessage.length < 5) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    beforeMount() {\r\n        this.attachToGlobal(this, [\"sendMail\", \"validateOnKeyPress\"]);\r\n    }\r\n\r\n    mounted() {\r\n        this.d.form.userName = window[\"xjs\"]?.userName ?? \"\";\r\n        this.d.form.userMail = window[\"xjs\"]?.userMail ?? \"\";\r\n    }\r\n}\r\n"],"sourceRoot":""}