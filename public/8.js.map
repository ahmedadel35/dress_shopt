{"version":3,"sources":["webpack:///./resources/js/pages/product-list.ts"],"names":["d","data","mp","loadingData","landList","sliderOpt","cat_slug","extractSlug","nextUrl","remain","loadingProducts","scroll","activeSlug","empty","doc","route","method","info","url_with_params","test_curl","response","res_doc","headers","url_params","query","parent","cart","items","wish","count","total","item","size","color","qty","wishId","wishing","cartLoaded","cartLoader","wishLoader","currentFilter","currentFilterIndx","colors","sizes","prices","min","max","selectedPrices","filters","price","stars","q","searching","resetFilters","Math","random","userId","scrollTop","openModal","slug","this","openModalNative","loadData","path","append","isBack","sort","split","showLoader","get","params","then","res","setDoc","length","hideLoader","concat","document","body","documentElement","doCalc","next_page_url","to","error","map","p","addOrRemove","push","saved_price","a","b","round","some","txt","id","checked","getProducts","resetAllfilters","checkIfReachedBottom","window","onscroll","event","clientHeight","querySelector","scrollHeight","isSearch","title","replace","url","lang","encodeURI","history","textContent","addToCart","addToCartNative","removeFromCart","removeFromCartNative","addToWish","addToWishList","pushToCartList","filterData","str","uri","setSideFilters","type","forEach","x","searchFor","checkSearchForm","location","pathname","indexOf","href","hasFilterActive","f","fillLoadingData","beforeMount","attachToGlobal","mounted","$on","_","onpopstate","e","state","ProductList"],"mappings":"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","file":"8.js","sourcesContent":["import { Component, Mixins } from \"vue-property-decorator\";\r\nimport Super from \"./super\";\r\nimport ProductInterface from \"../interfaces/product\";\r\nimport Axios from \"axios\";\r\nimport SliderInterface from \"../interfaces/slider\";\r\nimport ImgSlider from \"../components/ImgSlider.vue\";\r\nimport HistoryDocInterface from \"../interfaces/history-doc\";\r\nimport CartInterface from \"../interfaces/cart\";\r\nimport CartItemInterface from \"../interfaces/cart-item\";\r\nimport ProductItem from \"../components/ProductItem.vue\";\r\nimport ProductMixin, { EMPTY_PRODUCT } from \"../mixins/product-mixin\";\r\nimport ProductListMixin from \"../mixins/product-list-mixin\";\r\n\r\nexport interface Param {\r\n    id: string;\r\n    txt: string;\r\n    checked: boolean;\r\n}\r\n\r\nexport interface Price {\r\n    min: number;\r\n    max: number;\r\n}\r\n\r\nexport interface ProductListData {\r\n    data: ProductInterface[];\r\n    mp: ProductInterface;\r\n    loadingData: number[];\r\n    landList: boolean;\r\n    sliderOpt: SliderInterface;\r\n    cat_slug: string;\r\n    nextUrl: string;\r\n    remain: number;\r\n    loadingProducts: boolean;\r\n    scroll: number;\r\n    activeSlug: string;\r\n    empty: boolean;\r\n    doc: HistoryDocInterface;\r\n    cart: CartInterface;\r\n    item: {\r\n        size: number;\r\n        color: number;\r\n        qty: number;\r\n        wishId: number;\r\n        wishing: boolean;\r\n    };\r\n    cartLoaded: number;\r\n    cartLoader: boolean;\r\n    wishLoader: boolean;\r\n    currentFilter: string;\r\n    currentFilterIndx: string;\r\n    colors: Param[];\r\n    sizes: Param[];\r\n    prices: Price;\r\n    selectedPrices: Price;\r\n    filters: {\r\n        sizes: string[];\r\n        colors: string[];\r\n        price: Price;\r\n        stars: number;\r\n    };\r\n    q: string;\r\n    searching: boolean;\r\n    resetFilters: number;\r\n    userId: number;\r\n    scrollTop: number;\r\n}\r\n\r\n@Component\r\nexport default class ProductList extends Mixins(\r\n    ProductMixin,\r\n    ProductListMixin\r\n) {\r\n    public d: ProductListData = {\r\n        data: [],\r\n        mp: EMPTY_PRODUCT,\r\n        loadingData: [],\r\n        landList: false,\r\n        sliderOpt: {},\r\n        cat_slug: this.extractSlug(),\r\n        nextUrl: \"\",\r\n        remain: 15,\r\n        loadingProducts: true,\r\n        scroll: 0,\r\n        activeSlug: this.extractSlug(),\r\n        empty: false,\r\n        doc: {\r\n            route: \"\",\r\n            method: \"GET\",\r\n            info: \"\",\r\n            url_with_params: \"\",\r\n            test_curl: \"\",\r\n            response: \"\",\r\n            res_doc: [200, \"\"],\r\n            headers: [],\r\n            url_params: [],\r\n            query: [],\r\n            parent: \"\"\r\n        },\r\n        cart: {\r\n            items: [],\r\n            wish: [],\r\n            count: 0,\r\n            total: 0\r\n        },\r\n        item: {\r\n            size: 0,\r\n            color: 0,\r\n            qty: 1,\r\n            wishId: 0,\r\n            wishing: false\r\n        },\r\n        cartLoaded: 0.555,\r\n        cartLoader: true,\r\n        wishLoader: true,\r\n        currentFilter: \"\",\r\n        currentFilterIndx: \"pop\",\r\n        colors: [],\r\n        sizes: [],\r\n        prices: {\r\n            min: 0,\r\n            max: 0\r\n        },\r\n        selectedPrices: { min: 0, max: 0 },\r\n        filters: {\r\n            sizes: [],\r\n            colors: [],\r\n            price: {\r\n                min: 0,\r\n                max: 0\r\n            },\r\n            stars: 0\r\n        },\r\n        q: \"\",\r\n        searching: false,\r\n        resetFilters: Math.random(),\r\n        userId: 0,\r\n        scrollTop: 0\r\n    };\r\n\r\n    public openModal(slug: string) {\r\n        this.openModalNative(this.d, slug, \"productModal\");\r\n    }\r\n\r\n    public loadData(\r\n        path: string = `/collection/${this.d.cat_slug}`,\r\n        append: boolean = false,\r\n        isBack: boolean = false,\r\n        sort: string | \"pop\" | \"rated\" | \"lowTo\" | \"highTo\" = this.d\r\n            .currentFilterIndx\r\n    ) {\r\n        // console.log(this.d.q);\r\n        if (!append && !this.d.searching) {\r\n            this.d.activeSlug = path.split(\"/\")[2];\r\n        }\r\n\r\n        if (this.d.searching) {\r\n            this.d.activeSlug = this.d.q;\r\n        }\r\n\r\n        this.d.empty = false;\r\n\r\n        this.showLoader(append);\r\n\r\n        Axios.get(path, {\r\n            params: { sort, filters: this.d.filters, q: this.d.q }\r\n        }).then((res: any) => {\r\n            if (!res || !res.data.data) {\r\n                this.error();\r\n                return;\r\n            }\r\n\r\n            this.setDoc(this.d.activeSlug, isBack, append, this.d.searching);\r\n\r\n            if (!res.data.data.length) {\r\n                this.hideLoader();\r\n                this.d.empty = true;\r\n                return;\r\n            }\r\n\r\n            res = res.data;\r\n\r\n            this.setDoc(this.d.activeSlug, true, append, this.d.searching);\r\n\r\n            if (append) {\r\n                this.d.data = this.d.data.concat([...res.data]);\r\n                // setTimeout(_ => this.hideLoader(append), 5000);\r\n            } else {\r\n                if (this.d.scrollTop > 10) {\r\n                    // window.scrollTo(0, 0);\r\n                    // console.log(\"scrolling\");\r\n                    document.body.scrollTop = 0;\r\n                    document.documentElement.scrollTop = 0;\r\n                }\r\n                this.d.data = [...res.data];\r\n                // this.hideLoader(append);\r\n            }\r\n\r\n            this.doCalc(res.data, append);\r\n\r\n            this.d.nextUrl = res.next_page_url || \"\";\r\n            this.d.remain = res.total - res.to;\r\n            this.d.loadingProducts = false;\r\n            this.d.searching = false;\r\n\r\n            // setTimeout(_ => this.hideLoader(append), 4000);\r\n            this.hideLoader(append);\r\n        });\r\n    }\r\n\r\n    public doCalc(data: ProductInterface[], append: boolean) {\r\n        let prices: number[] = [this.d.prices.min, this.d.prices.max];\r\n        if (!append) {\r\n            // this.d.colors = [];\r\n            // prices = [];\r\n        }\r\n\r\n        data.map(p => {\r\n            this.addOrRemove(\"colors\", p);\r\n            this.addOrRemove(\"sizes\", p);\r\n            prices.push(p.saved_price as number);\r\n        });\r\n\r\n        prices = prices.sort((a, b) => a - b);\r\n        // console.log(prices);\r\n        this.d.prices = {\r\n            min: prices[0],\r\n            max: prices[prices.length - 1]\r\n        };\r\n        this.d.selectedPrices.max = Math.round(\r\n            (this.d.prices.min + this.d.prices.max) / 2 + this.d.prices.min\r\n        );\r\n    }\r\n\r\n    public addOrRemove(data: string, p: ProductInterface) {\r\n        for (const color of p[data]) {\r\n            if (!this.d[data].some(b => b.txt === color)) {\r\n                this.d[data].push({\r\n                    id: \"was\" + Math.round(Math.random() * 156133),\r\n                    txt: color,\r\n                    checked: false\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    public getProducts(path: string = \"\") {\r\n        if (path === `/collection/${this.d.activeSlug}`) {\r\n            return;\r\n        }\r\n        this.d.activeSlug = path;\r\n        this.d.searching = false;\r\n        this.d.q = \" \";\r\n        this.d.q = \"\";\r\n        this.resetAllfilters();\r\n        // window.screenTop(0, 0);\r\n        this.loadData(path);\r\n        // console.log(this.d.q.length);\r\n    }\r\n\r\n    public checkIfReachedBottom() {\r\n        window.onscroll = event => {\r\n            this.d.scrollTop =\r\n                document.documentElement.clientHeight +\r\n                document.documentElement.scrollTop;\r\n\r\n            // check if user has reached the end of page\r\n            if (\r\n                this.d.scrollTop >=\r\n                    (document.querySelector(\r\n                        \"#component-container\"\r\n                    ) as HTMLDivElement).scrollHeight &&\r\n                this.d.data.length &&\r\n                \"\" !== this.d.nextUrl &&\r\n                !this.d.loadingProducts\r\n            ) {\r\n                this.loadData(this.d.nextUrl, true);\r\n                // console.log(this.d.nextUrl);\r\n            }\r\n        };\r\n    }\r\n\r\n    public setDoc(\r\n        slug: string,\r\n        isBack: boolean = false,\r\n        append: boolean = false,\r\n        isSearch: boolean = false\r\n    ) {\r\n        if (append) return;\r\n\r\n        const method = isBack ? \"replaceState\" : \"pushState\";\r\n        const slugSpace = slug.replace(/-/g, \" \");\r\n        const title = `LavaStore - ${slugSpace}`;\r\n        let url = `/${this.lang()}/products/${slug}`;\r\n        if (isSearch) {\r\n            url = `/${this.lang()}/products/find?q=${encodeURI(slug)}`;\r\n        }\r\n\r\n        window.history[method](\r\n            {\r\n                slug\r\n            },\r\n            title,\r\n            url\r\n        );\r\n        document.title = title;\r\n        (document.querySelector(\r\n            `#ptitle`\r\n        ) as HTMLHeadingElement).textContent = title;\r\n        // this.loadData(slug);\r\n    }\r\n\r\n    public addToCart() {\r\n        // console.log('adding to cart product');\r\n        const res = this.addToCartNative(\r\n            this.d.mp,\r\n            this.d.item.qty,\r\n            this.d.item.size,\r\n            this.d.item.color\r\n        );\r\n    }\r\n\r\n    public removeFromCart(id: string) {\r\n        this.removeFromCartNative(id);\r\n    }\r\n\r\n    public addToWish() {\r\n        this.addToWishList(this.d, \"mp\").then(res => {\r\n            if (res && res.item) {\r\n                this.pushToCartList({ item: res.item });\r\n            }\r\n        });\r\n    }\r\n\r\n    public filterData(\r\n        sort: string | \"pop\" | \"rated\" | \"lowTo\" | \"highTo\" = \"pop\",\r\n        str: string\r\n    ) {\r\n        this.d.currentFilter = str;\r\n        this.d.currentFilterIndx = sort;\r\n        let uri = `/collection/${this.d.activeSlug}`;\r\n        if (this.d.q.length) {\r\n            this.d.searching = true;\r\n            uri = `/collection/find?q=${this.d.q}`;\r\n        }\r\n        this.loadData(uri, false);\r\n    }\r\n\r\n    public setSideFilters(type: string, data: any) {\r\n        // console.log(type, data);\r\n        if (type === \"size\") {\r\n            this.d.filters.sizes = [];\r\n            (data as Param[]).forEach(x => this.d.filters.sizes.push(x.txt));\r\n        } else if (type === \"color\") {\r\n            this.d.filters.colors = [];\r\n            (data as Param[]).forEach(x => this.d.filters.colors.push(x.txt));\r\n        } else if (type === \"price\") {\r\n            const min = this.d.selectedPrices.min;\r\n            const max = this.d.selectedPrices.max;\r\n            this.d.filters.price = {\r\n                min: min <= max ? min : max,\r\n                max: max >= min ? max : min\r\n            };\r\n        } else {\r\n            this.d.filters.stars = data as number;\r\n        }\r\n\r\n        // console.log(this.d.filters);\r\n        let uri = `/collection/${this.d.activeSlug}`;\r\n        if (this.d.q.length) {\r\n            this.d.searching = true;\r\n            uri = `/collection/find?q=${this.d.q}`;\r\n        }\r\n        this.loadData(uri, false);\r\n    }\r\n\r\n    public searchFor() {\r\n        if (!this.d.q || !this.d.q.length) return;\r\n        this.d.searching = true;\r\n        this.loadData(`/collection/find`);\r\n    }\r\n\r\n    public checkSearchForm() {\r\n        const findPage = location.pathname.indexOf(\"/products/find\") > -1;\r\n        if (findPage) {\r\n            this.d.q = location.href.split(\"q=\")[1];\r\n            this.searchFor();\r\n            return;\r\n        }\r\n        this.loadData();\r\n    }\r\n\r\n    public resetAllfilters() {\r\n        this.d.resetFilters = Math.round(Math.random() * 99999);\r\n        this.d.filters = {\r\n            sizes: [],\r\n            colors: [],\r\n            price: {\r\n                min: 0,\r\n                max: 0\r\n            },\r\n            stars: 0\r\n        };\r\n        this.loadData();\r\n    }\r\n\r\n    public hasFilterActive(): boolean {\r\n        const f = this.d.filters;\r\n        return (\r\n            f.sizes.length > 0 ||\r\n            f.colors.length > 0 ||\r\n            f.price.min > 0 ||\r\n            f.price.max > 0 ||\r\n            f.stars > 0\r\n        );\r\n    }\r\n\r\n    private showLoader(append: boolean = false) {\r\n        this.d.loadingProducts = true;\r\n\r\n        if (!append) {\r\n            this.d.remain = 15;\r\n            this.d.data = [];\r\n        }\r\n        this.fillLoadingData(this.d);\r\n    }\r\n\r\n    private hideLoader(append: boolean = false) {\r\n        this.d.loadingProducts = false;\r\n        this.d.loadingData = [];\r\n    }\r\n\r\n    beforeMount() {\r\n        this.attachToGlobal(this, [\r\n            \"openModal\",\r\n            \"getProducts\",\r\n            \"showNotify\",\r\n            \"pushToCartList\",\r\n            \"addToCart\",\r\n            \"removeFromCart\",\r\n            \"addToWish\",\r\n            \"filterData\",\r\n            \"setSideFilters\",\r\n            \"resetAllfilters\",\r\n            \"hasFilterActive\"\r\n        ]);\r\n        this.fillLoadingData(this.d);\r\n    }\r\n\r\n    mounted() {\r\n        this.checkIfReachedBottom();\r\n\r\n        this.$on(\"cartDone\", _ => {\r\n            this.d.cartLoaded = Math.random() * 10000;\r\n        });\r\n\r\n        this.checkSearchForm();\r\n\r\n        window.onpopstate = e => {\r\n            if (e.state) {\r\n                // console.log(e.state);\r\n                this.loadData(`/collection/${e.state.slug}`, false, true);\r\n            }\r\n        };\r\n    }\r\n}\r\n"],"sourceRoot":""}